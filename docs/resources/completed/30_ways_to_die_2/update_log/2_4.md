# 2.4

:::tip

为保证和原始更新日志一致，日志文本无须遵守格式规范，且不作相关调整。

:::

2.4 版本是一次针对 2.3 在高版本无法运行的问题进行的紧急更新。该版本主要更新点在：

- 使用新版的`/execute`语法
- 去除地图的实验性玩法
- 将地图的基础版本提升到 1.20.10
- 更新了设置中心及各种设置项
- 自定义关卡的加载机制优化
- 语言和客户端现在能够自行检测
- 对地图进行了一些小更新，并修复了部分漏洞

---

## 版本列表

- 开发版本
  - Dev 24.06.22
- 实验性版本
  - [Exp 2.4_01](#exp-24_01)
- Alpha
  - [Alpha 2.4_01](#alpha-24_01)
  - [Alpha 2.4_02](#alpha-24_02)
- Beta
  - [Beta 2.4_01](#beta-24_01)
  - [Beta 2.4_02](#beta-24_02)
- 预发布版本
  - [2.4 - Pre 1](#24---pre-1)
  - [2.4 - Pre 2](#24---pre-2)
- 发布候选版
  - [2.4 - RC1](#24---rc-1)
  - [2.4 - RC2](#24---rc-2)
  - [2.4 - RC3](#24---rc-3)
- 正式版
  - [2.4](#24-1)

---

## Dev 24.06.22

> 发布于 2024.06.22 。该版本无更新日志。

## Exp 2.4_01

> 发布于 2024.07.06 。该版本无更新日志。

## Alpha 2.4_01

> 发布于 2024.08.04 。

下午好！在该版本中，我们将2.3版本中出现的严重漏洞进行了紧急修复，并且使用了最新的地图模板和新版的`/execute`命令做支持。本次更新内容看起来不多，但其实在底层上所做的努力是很多的，一起来看看吧！

### 开幕

- 现在开幕时会自动检测玩家所使用的语言，并自行更改。
- 现在开幕时不再允许更改语言。

### 关卡

- 移除了第13关、第21关、第22关、隐藏第2关、限时第3关的命令方块，转而使用函数系统检测。
- 现在进度 [ 结束了！...吗？] 将在第一轮结束特效完成后给予。
- 现在浏览全地图将更改玩家为旁观模式。
- 修复了随机药水和饥饿药水在 1.20.70 更新之后失效的问题。
- 修复了大部分可使用物品和部分方块在 1.21.20 更新之后失效的问题。
- 移除了开发者模式下，显示的快捷栏标题的调试性信息。

### 底层更新

- 将所有地图独有方块**去实验性玩法化**。
- 将所有地图独有物品**去实验性玩法化**。
- 为所有结构加入了对应的命名空间，以使其与网易的结构标准相适应。
- 更改了几乎所有主线、大厅、设置、系统函数的命令格式，**使用 1.20.10 的新版命令格式**；并移除了大量的标记实体，使用假名记录分数。
- 移除了几乎所有结构的命令方块（除自定义关卡），已有命令方块的结构也不再执行实质的命令。**地图现在除自定义关卡外，完全由函数驱动。**
- 关于底层更新，您可以查看关于[地图模板](../../../template/homepage)的介绍和更新内容。

## Alpha 2.4_02

> 发布于 2024.08.04 。

我们今晚发布 Alpha 2.4_02 版本，以修复上个版本出现的一些问题。

### 漏洞修复
- \#29 修复了关于本地图和预览地图的防作弊检测颠倒的问题
- \#30 多人情况下，在进行锁定视角的动画时现在会施加隐身效果
- \#32 现在限时关卡通关后，无论何种情况，信标都能够正常显现
- \#33 恢复了维度异常的正常功能，并且在第30关时，当玩家试图进入下界传送门时，会分解玩家的打火石
- \#35 修复了在教程关卡中，如果按钮拿的过早会导致后续的命令无法运行，导致卡关的问题
- \#37 开发者模式下，4个用于切换游戏模式的物品现在能够正常显示物品icon

## Beta 2.4_01

> 发布于 2024.08.09 。

我们今晚发布 Beta 2.4_01 版本，该版本带来了一些改进和漏洞修复，欢迎继续反馈测试！我们完全欢迎在合理范围内的卡bug行为！

### 更改
- \#32 现在大厅在特定情况下放置信标的频率改为1秒1次（以前是0.05秒1次）
- \#36 移除了语言的单独设置，现在能够进行全自动的检测
- \#38 现在结束特效在刚开始时能够回到大厅上方观看时间流逝了
- \#45 添加了标题和全景图

### 漏洞修复
- \#34 修复了logo结构可能出错的偶发性问题
- \#42 修复了在第18关玩家可以在房间外侧放置玻璃的问题
- \#43 修复了在第7、8、10关时重置关卡在不正确的维度进行下的问题
- \#44 修复了末地的隐藏按钮房间中出现双按钮的问题

### 底层更新
- \#40 新增了一个统计查询函数`developer/query/stats`，可以用于查询当前提示、攻略、跳过的使用情况
- 将记分项`settings.language`迁移为`data.language`

## Beta 2.4_02

> 发布于 2024.08.11 。

下午好！现在发布 Beta 2.4_02 版本，该版本主要修复了自定义关卡的一些问题。

我们计划于 8 月 15 日附近结束对 30 种死法 2 的更新，发布正式版。目前所剩的问题已经不多，因此这是最后一个 Beta 版本。

和 2.3 时期如我们当时所宣称的一样，如果没有重大问题再次出现，2.4 版本之后将不再更新，即进入停更状态。

感谢你对我们的支持！

### 更改
- 现在地图可以在基岩版 1.20.10 下运行
- 缩短了自定义关卡加载和保存结构时所需的时间
- \#39 自定义关卡的命令方块系统现在适应到 1.20.10 下的新版命令系统
- 更新了强制Mojangles字体对符号 § 的支持
- 现在自定义关卡在加载结构前会先从上到下层逐层清理原有房间后再重新加载

### 漏洞修复
- 修复了在设置第 30 关对话时出现的提示异常的问题
- 修复了在自定义关卡下使用“下一步”和“返回”不能使教程程序更改的问题
- 修复了自定义关卡不会给予提示、攻略和跳过的问题
- 修复了自定义关卡第 1 关无法进入的问题
- 修复了自定义关卡无法设定限时的问题
- 修复了自定义关卡的限时设定为 `-1` 会导致“超时”的问题
- 修复了自定义关卡在编辑模式下不会将玩家更改为创造模式的问题

### 底层更新
- 从代码层面上移除了语言的设置
- 修复了变量查询函数中，`data.language`在变量查询函数中错误地显示到`settings`分项中的问题
- 修复了变量查询函数不能正确地展示 `data.diyLevels.step` 的描述的问题
- 修复了自定义方块不能正确地显示其名称的问题
- 现在主世界会在初始化时新增 3 个常加载区域：`overworld1`、`overworld2`、`overworld3`，涵盖主世界部分的地图区域，并移除了原有的较小的`originArea`常加载区域
- 拆分并移除了物品供应器函数 `lib/modify_data/item/supplier`

## 2.4 - Pre 1

> 发布于 2024.08.16 。

早上好！我们很快就要发布本地图的正式更新版本了，下面是我们这 5 天所进行的更新。

### 设置中心

- 经过了一轮大改
- 设置中心主界面现在只有 4 个设置大项：**「地图难度设定与速通模式」**、**「关于本地图」**、**「杂项设置」**、**「权限等级设定与高级功能」**
- 但是在**速通模式**下，主界面还会有额外的 4 个设置项可用：**「速通模式」**（直接设置）、**「第30关对话设定」**、**「制作人」**、**「预览地图」**，因为这 4 个设置项在速通模式下较为常用
- 「第30关对话设定」、「结束特效的烟花设定」、「记分板显示设定」和「地图时间设定」迁移到了「杂项设置」大项中
- 「速通模式」迁移到了「地图难度设定与速通模式」大项中
- 「预览地图」和原来的「地图玩法与玩法 Q&A 」的 3 项设置迁移到了「关于本地图」大项中
- 「关卡延迟完成设定」和「gamerule锁定设定」迁移到了「权限等级设定与高级功能」大项中
- 在「权限等级设定与高级功能」中新增了一个设置项「完成所有进度」，仅限开发者模式可用
- 在「权限等级设定与高级功能」中移除了设置项「语言和版本检测」

### 特性更改

- \#54 \#55 修正了部分英语翻译
- \#56 现在在开幕阅读完规则后，传送会面向 4 个难度
- 为英文的新进度已开放添加了复数表述（advancements）
- 语言和客户端检测现在每秒进行 1 次

### 漏洞修复

- \#57 修复了大厅的快捷栏标题中可能会有一条不能成功执行的问题
- \#59 现在解锁彩蛋关卡后，文本展示实体会进行一次更新
- \#60 修复了自定义关卡的原支线第1关没有检测10次高频就通过了检测的问题
- \#61 修复了彩蛋第 9 关英文环境下重置无法加载药水的问题
- 修复了先完成彩蛋第 8 关后完成主线不会给予限时关卡物品的问题
- 修复了结束特效生成的 YZBWDLT 的名称不随语言变化的问题

### 底层更新

- \#53 拆分了`entities/player/using_back`函数和`entities/player/using_next_step`函数

## 2.4 - Pre 2

> 发布于 2024.08.20 。

嗨！我们本次为设置中心一些超长文字的设置项进行了巨大的改动，以使其不再那么枯燥。一起来看看吧！

### 设置中心

- 「关于本地图」设置项的 6 个设置都得到了简化与更改
- 其中，简化了「更新日志」、「制作人」、「地图规则」的描述
- 「地图玩法」现在拥有一个全新的动画
- 「常见问题」现在使用类似于烟花教程的方式，使用上一步和下一步逐条查看常见问题

### 漏洞修复

- 修复了彩蛋第 6 关的快捷栏丢失的问题
- 更正了部分英语翻译
- 更正了火卫三在隐藏第 1 关的昵称
- \#58 现在地图的所有关卡都是已重置的状态

## 2.4 - RC 1

> 发布于 2024.08.21 。

上午好。我们将在两天之内更新正式版。欢迎进行测试！

### 漏洞修复

- 现在设置中心不再尝试始终放置文本展示实体
- 修复了当只开启了彩蛋关卡，同时主线未完成任何一关的时候，进入设置中心，会导致进度线显示错误的问题
- 修复了设置中心可能会无法及时清除展示框和悬浮文本的问题
- 同步了新纪录，并且更改了部分翻译
- 修复了彩蛋第 7 关的错误，并更新了地图名称
- 修复了限时第 3 关没有悬浮文本的问题

## 2.4 - RC 2

> 发布于 2024.08.21 。

晚上好！现在我们发布 RC 2 版本以修复 RC 1 版本中的一点小问题。

### 漏洞修复

- 现在结束特效中的“量筒”会说本地图经过了 5 个版本的跨度
- 更正了在英语中，文雨的 XBoxID

## 2.4 - RC 3

> 发布于 2024.08.22 。

晚上好！现在我们发布 RC 3 版本以修复 RC 2 版本中的一点小问题。

### 漏洞修复

- 现在当**再次**尝试第 13 关第 3 部分、第 20 关和第 30 关时，在这些关卡跳过不再会完成对应进度
- 修复了彩蛋第 6 关的快捷栏标题错误地显示了彩蛋第 7 关的漏洞
- 修复了使用提示攻略跳过时会出现的异常问题，并且修复了在不合理的情况下使用攻略时会错误地清除提示的问题

## 2.4

> 发布于 2024.08.23 。

嗨！欢迎你玩这张地图！这是这张地图的一次紧急更新，是针对国际版和中国版双版本更新均无法正常运行的一次紧急修复。

网易 1.20.10 更新后，为适配到国际版的 UGC 生态而漏洞不断，虽然我并没有试过中国版目前的问题，但可以猜到至少存在一条问题：物品 icon 丢失。以及国际版 1.21.20 更新后，更是直接移除了假日创作者实验性玩法，严重地打击了现有的基岩版生态，对那些没有及时适配到新版语言的作品和开发者是迎头一击。因此，为了立刻解决这些严重的问题，我们对本地图进行了一次紧急更新。当然，地图的更新内容还是很多的，让我们一起来看看本版本的更新内容吧！

### 地图

- 添加了标题和全景图
- 现在地图在基岩版 1.20.10 或更高版本运行，且默认锁定版本
- 更新了强制Mojangles字体对符号 § 的支持

### 开幕

- 现在开幕时会自动检测玩家所使用的语言，并自行更改。
- 现在开幕时不再允许更改语言。

### 自定义关卡

- 缩短了自定义关卡加载和保存结构时所需的时间
- 自定义关卡的命令方块系统现在适应到 1.20.10 下的新版命令系统
- 现在自定义关卡在加载结构前会先从上到下层逐层清理原有房间后再重新加载

### 设置中心

- 经过了一轮大改
- 设置中心主界面现在只有 4 个设置大项：**「地图难度设定与速通模式」**、**「关于本地图」**、**「杂项设置」**、**「权限等级设定与高级功能」**
- 但是在**速通模式**下，主界面还会有额外的 4 个设置项可用：**「速通模式」**（直接设置）、**「第30关对话设定」**、**「制作人」**、**「预览地图」**，因为这 4 个设置项在速通模式下较为常用
- 「第30关对话设定」、「结束特效的烟花设定」、「记分板显示设定」和「地图时间设定」迁移到了「杂项设置」大项中
- 「速通模式」迁移到了「地图难度设定与速通模式」大项中
- 「预览地图」和原来的「地图玩法与玩法 Q&A 」的 3 项设置迁移到了「关于本地图」大项中
- 「关卡延迟完成设定」和「gamerule锁定设定」迁移到了「权限等级设定与高级功能」大项中
- 在「权限等级设定与高级功能」中新增了一个设置项「完成所有进度」，仅限开发者模式可用
- 「关于本地图」设置项的 6 个设置都得到了简化与更改
- 其中，简化了「更新日志」、「制作人」、「地图规则」的描述
- 「地图玩法」现在拥有一个全新的动画
- 「常见问题」现在使用类似于烟花教程的方式，使用上一步和下一步逐条查看常见问题
- 移除了语言的单独设置，现在能够进行全自动的检测

### 关卡

- 移除了第13关、第21关、第22关、隐藏第2关、限时第3关的命令方块，转而使用函数系统检测。
- 现在进度 [ 结束了！...吗？] 将在第一轮结束特效完成后给予。
- 现在浏览全地图将更改玩家为旁观模式。
- 修复了随机药水和饥饿药水在 1.20.70 更新之后失效的问题。
- 修复了大部分可使用物品和部分方块在 1.21.20 更新之后失效的问题。
- 移除了开发者模式下，显示的快捷栏标题的调试性信息。

### 漏洞修复

- 修复了地图在国际版 1.21.20 或更高版本无法运行的问题
- 修复了地图在中国版无法检测第 17 关进度的问题
- 修复了地图在中国版可能会导致的物品 icon 丢失的问题
- 修正了部分英语翻译
- 更正了火卫三在隐藏第 1 关的昵称
- 现在结束特效中的“量筒”会说本地图经过了 5 个版本的跨度

### 底层更新

- 将所有地图独有方块**去实验性玩法化**。
- 将所有地图独有物品**去实验性玩法化**。
- 为所有结构加入了对应的命名空间，以使其与网易的结构标准相适应。
- 更改了几乎所有主线、大厅、设置、系统函数的命令格式，**使用 1.20.10 的新版命令格式**；并移除了大量的标记实体，使用假名记录分数。
- 移除了几乎所有结构的命令方块（除自定义关卡），已有命令方块的结构也不再执行实质的命令。**地图现在除自定义关卡外，完全由函数驱动。**

