---
sidebar_position: 3
authors: [量筒]
---

# 4.2

4.2 是本地图的第 3 个大版本，预计在十一发布。

本次更新旨在完全采用新版的命令格式重制地图，并添加多个新功能来补充游戏玩法。主要更新点为：

- 使用新版的`/execute`语法，大幅优化命令系统，现在地图运行更加流畅
- 使用脚本以进行更精准的判定
- 现在使用基于旁观模式的旁观机制，而不再使用旁观区，且允许在多人模式下选择主动旁观
- 现在使用御风珠来代替绳枪，以和其他冒险世界系列作品（苏醒、迷失、筑梦）保持同步
- 新增 NPC 的动效、门的动效、公告板、玩家动作等，以及基于`/camera`的新视角动画
- 新增路线引导机制
- 新增二周目下更多的设置，允许中途退出游戏和选定特定关卡试炼
- 进行了装饰简化
- 加强或削弱了部分 BOSS
- 优化了部分游戏体验，并修复了一些漏洞

> 本群有类似更新规模和目标的其他地图更新，为[《30 种死法 2》的 2.4 版本](./../../../completed/ways_to_die_2/update_log/2_4)。

---

## 版本列表

- 4.2
  - Alpha 版本
    - [Alpha 4.2_01](#alpha-42_01)
    - [Alpha 4.2_01b](#alpha-42_01b)
    - [Alpha 4.2_02](#alpha-42_02)
    - [Alpha 4.2_02b](#alpha-42_02b)
    - [Alpha 4.2_03](#alpha-42_03)
    - [Alpha 4.2_03b](#alpha-42_03b)
  - Beta 版本
    - [Beta 4.2_01](#beta-42_01)
    - [Beta 4.2_01b](#beta-42_01b)
    - [Beta 4.2_01c](#beta-42_01c)
    - [Beta 4.2_02](#beta-42_02)
  - Pre 版本
    - [4.2 - Pre 1](#42---pre-1)
    - [4.2 - Pre 2](#42---pre-2)
    - [4.2 - Pre 3](#42---pre-3)
    - [4.2 - Pre 4](#42---pre-4)
  - RC 版本
    - [4.2 - RC 1](#42---rc-1)
    - [4.2 - RC 2](#42---rc-2)
  - 正式版本
    - [4.2](#42-1)

## 公告列表

- [群公告 - 版本 Alpha 4.2_01 开始测试的通知](/blog/anno/anno/2025/071401)
- [群公告 - 关于开展版本 Alpha 4.2_01b 的集体测试的通知](/blog/anno/anno/2025/071402)
- [群公告 - 版本 Alpha 4.2_02 和冒险世界：筑梦 v0.56 一并开始测试的通知](/blog/anno/anno/2025/080301)
- [群公告 - 版本 Alpha 4.2_03 开始测试和开展集体测试的通知](/blog/anno/anno/2025/082901)
- [群公告 - 版本 Beta 4.2_01 开始测试和开展集体测试的通知](/blog/anno/anno/2025/090601)
- [群公告 - 版本 Beta 4.2_02 开始测试和开展集体测试的通知](/blog/anno/anno/2025/092001)
- [群公告 - 版本 4.2 - Pre 1 开始测试的通知](/blog/anno/anno/2025/092501)
- [群公告 - 版本 4.2 - Pre 2 开始测试的通知](/blog/anno/anno/2025/092701)

---

## Alpha 4.2_01

> 发布于 25.07.14。

晚上好！今天我们发布 4.2 的第一个版本。在该版本中，我们进行了类似于 30 种死法 2 2.4 版本的工作——将所有命令新语法化。同时，引入了很多从 1.18.30\~1.21.0 的新游戏机制，来看看这次的更新内容吧\~！

### 游戏内容

#### 玩家物品

- 现在使用御风珠来代替绳枪，以和冒险世界（包括冒险世界：筑梦）系列的其他类似物品保持一致
  - 同时，移除了物品准星
- 现在物品是每秒检测一次，并供应缺少的物品的，而不再是在特定时机检测并供应了
- 现在钻石头盔和钻石靴子不再需要玩家手持一次，是直接给予的了
- 现在弓箭秒杀骷髅可以正确地计入击杀数

#### 关卡

- 现在当失败达到 10 次后，会提供一个抗性提升 V（无敌）的效果
- 更名：烈焰之魂 -> 烈焰王
- 对 6-4 中烈焰王的技能进行了全面削弱，以降低无药通关的难度：
  - 涨落岩浆的间隔由 8\~20 秒延长为了 15\~30 秒
  - 恢复血量的间隔由 3 秒延长为了 6 秒
  - 召唤怪物的间隔由 3\~10 秒（二阶段）和 3\~5 秒（三阶段）延长为了 6\~10 秒（二阶段）和 6\~8 秒（二阶段）
  - 随机传送的间隔由 6\~10 秒延长为 10\~15 秒
- 现在仅限有中型或大型岩浆怪的波潮会启用关卡完成倒计时，而不再为有岩浆怪的关卡全关启用关卡倒计时。
  - 这个更改会使一些关卡的进程（例如 7-1、7-2）更顺滑一些。
- 现在在 7-5 中，当 BOSS 使用火球攻击时，不再能使用盾挡住这次伤害。

#### 信息板

- 现在不再尝试实时监测玩家位置，因其实用用途不大。因此，右侧信息板也不再实时返回玩家所处关卡位置
- 现在不再在怪物生成后检查最大怪物数
- 现在死亡榜可以记录一切死亡的数据，而不光是仅在游戏中记录死亡数据了
- 现在药水不再显示当前上限
- 现在不再会在玩家手持物品时，来回在物品信息和关卡信息之间闪了

#### 观战

- 现在游戏外的死亡次数也可以正常计入了
- 移除了观战区，现在使用旁观模式进行旁观

#### 剧情

- 重新设计了全部剧情的相机镜头
- 统一了中国版和国际版的剧情内容，不再单独做出适配
- 移除了一个严重违规成员的制作人表
- 现在在结束剧情中，田英将告知玩家的死亡次数，而不再是总的关卡失败次数
- 现在成就不再能多次获取
- 现在成就必须在非作弊模式下才能获取
- 现在最佳时间将分为单人和多人，不再共用
  - 例如，以前如果单人模式打难度 2，花费了 70 分钟，多人打难度 2 花了 35 分钟，那么最佳时间就会是难度 2 为 35 分钟
  - 现在同样的情况下，将分别记录为单人难度 2 花了 70 分钟和多人难度 2 花了 35 分钟。

### 漏洞修复

- 尝试修复了在 6-4 中的变速齿轮（TPS 疑似严重降低）问题
- 修复了玩家可能会在进入游戏时就直接被判定为死亡的问题
- 修复了 6-2 的门放错位置的问题

### 底层更新

- 全面采用新版`/execute`语法
- 全面采用中国版脚本和国际版脚本配合函数系统
- 在群文档新增了一个文档，以供有需求的开发者查阅

#### 附加包

- 合并了`BP_aw_main`、`BP_aw_main_international`和`BP_aw_main_netease`为`BP_adventure_world`
- 合并了`RP_aw_main`、`RP_aw_music_pack`为`RP_adventure_world_main`
- 更名了`RP_aw_netease`为`RP_adventure_world_netease`
- 新增了`RP_adventure_world_international`
- 移除了`BP_aw_main_old`
- 现在`manifest.json`的最小引擎版本均为`1.21.0`

#### 物品

- 现在每种物品都使用`1.20.50`的格式版本
- 将`aw:hookshot`改为了`aw:wind_pearl`
- 移除了`aw:enable_crosshair`，因现在使用御风珠
- 移除了`aw:main_potion_used`和`aw:vice_potion_used`物品
- 移除了`aw:summon_monsters`物品，因现在可直接调用各关卡的`waves/`函数

#### 方块

- 现在每种方块都使用`1.20.50`的格式版本

#### 实体

- 移除了`player.json`，现在和玩家相关的检测都通过脚本进行
- 合并了`aw:npc`和`aw:npc_author`为`aw:npc`，并使用了实体属性
- 因生成器逻辑较为复杂，现在使用独立的实体`aw:spawner`生成怪物，不再使用`aw:marker`

#### 脚本

- 现在对地图分别添加了国际版和中国版的脚本支持
- 现在脚本用于御风珠的碰撞判定
- 现在物品的使用都依托于脚本进行检测，而不再使用玩家动画控制器
- 现在击杀判定依托于脚本进行检测，而不再使用玩家实体文件
- 现在玩家喝下药水依托于脚本进行检测，而不再使用`using_converts_to`的物品检测

#### 标记实体

- 现在所有的记分板变量都使用假名代替，移除了大量用于存储变量的标记
- 现在使用带以下`aw:level`实体属性的标记实体：
  - `this`：作为玩家的重生点
  - `next`：作为玩家进入下一关的检测点
  - `prev`：作为玩家在上一关的重生点
  - 游戏开始后，`this` -> `prev`，`next` -> `this`
  - 游戏失败后，`prev` -> `this`，`this` -> `next`
  - 游戏胜利后，删除`prev`，新建`next`

#### 记分板变量

- **新增**
  - `deathState: 0 | 1 | 2`记分板，用于记录玩家的死亡状态
    - `deathState.@s`=`0`：未处于死亡状态
    - `deathState.@s`=`1`：刚刚死亡，但还未记录死亡榜
    - `deathState.@s`=`2`：长期死亡，还未复活
  - `health`记分板，用于记录玩家或实体的血量。
  - `data.allowPotionSupply: 0 | 1`，用于标记允许补充药水
  - `data.allowArrowSupply: 0 | 1`，用于标记允许补充箭
    - 为`1`时，箭控制器不但补充箭，并且清除当前世界中的所有实体箭
  - `data.allowAcousticStoneCrystal: 0 | 1`，用于标记是否允许补充传声石结晶
  - `data.allowHud: 0 | 1`，用于标记是否启用 HUD
  - `data.allowRemoveItemEntity: 0 | 1`，用于标记是否移除物品掉落物
  - `data.allowTpPlayerWhenStart: 0 | 1`，用于标记开始关卡时是否传送玩家，默认为`1`
  - `data.gaming: 0 | 1`，是否正在 X-Y（1\<=X\<=7, Y!=0）的游玩状态，`0`：未处于游玩状态，`1`：正处于游玩状态，默认为`0`
  - 标签`outOfBorder`，用于判断旁观模式的玩家是否越界
- **更名**：
  - 记分板`deathTimes` -> 记分板`deathCount`
  - 记分板`killAmount` -> 记分板`killCount`
  - `data.maxPlayersAmount` -> `data.playerAmount`
  - `data.alivePlayersAmount` -> `data.alivePlayerAmount`
  - `data.failedTimes` -> `data.failedCount.thisLevel`
  - `data.allFailedTimes` -> `data.failedCount.allLevels`
  - `data.storyMode` -> `settings.storyMode`
  - `data.difficulty` -> `settings.difficulty`
  - `data.difficultyAdder` -> `settings.extraDifficulty`
  - `data.developerMode` -> `settings.developerMode`
  - `time.levelCompleteDelay` -> `time.levelCompleteCountdown`
  - 标签`potionUsed` -> `data.potionUsed`
  - 标签`cheated` -> `data.hasCheat`
  - `record.achievement.singlePlayer_completeMap` -> `record.achievement.singlePlayer.finishMap`
  - `record.achievement.multiPlayer_completeMap` -> `record.achievement.multiPlayer.finishMap`
  - `record.achievement.singlePlayer.notDied` -> `record.achievement.singlePlayer.neverDied`
- **拆分**：
  - 记分板变量`isAlive.@s` -> 标签变量`spectator`，新值与旧值的对应关系为：
    - `isAlive.@s`=`0` -> `data.levelCompleted`=`0`&&`spectator`
    - `isAlive.@s`=`1` -> `data.levelCompleted`=`0`&&!`spectator`
    - `isAlive.@s`=`2` -> `data.levelCompleted`=`1`
    - `isAlive.@s`=`3` -> 被抛弃，不再使用原来的判定方法
  - `data.gameId`，因其在诸多方面（包括数值分解、屏蔽词）等方面都造成了诸多不便
    - 现在使用`data.chapter`、`data.level`和`data.levelCompleted`代替
  - `xxx.timeline`、`xxx.dialogue` -> `xxx.timeline`、`data.allowNpcInteraction`
- **移除**：
  - `hookshot`记分板，现在使用脚本代替。
  - `data.hookshotAmount`，现在使用脚本代替。
  - `bossStage`记分板，现在使用记分板和脚本代替。
  - `isAlive`标签，现在用`deathState`代替。
  - `data.realDeadPlayersAmount`，因为现在可以直接使用`unless entity`检测相关玩家
  - `temp`、`temp2`、`temp3`记分板，现在使用`data`下的各`temp.`变量代替
  - `position.@s`，现在不再实时监测玩家所处位置，因其过于复杂且消耗性能
  - `data.maxMonsterAmount`，现在不再在怪物生成后检查最大怪物数
  - `time.@s`，现在不再监控玩家处于死亡状态下的时长

#### 关卡 ID

- 现在村庄的 ID 有下面的新的对应关系。
  - 现在`data.level`是从`1`开始算起的，阶段是基于`data.level`判断的
  - 合并了从见到张宇到获取传声石结晶的剧情为一个阶段

  | 游戏ID`data.temp.gameId` | 以前的游戏ID`data.temp.gameId` | 意义 |
  | :---: | :---: | --- |
  | `010`/`011` | `3` | |
  | `020`/`021` | `4` | |
  | `030`/`031` | `5` | |
  | `040`/`041` | `6~8` | |
  | `050`/`051` | `9`/`99` | 开幕 |
  | `709` | `701` | 剑之神殿剧情完成 |
  | `1010`/`1011` | `1001`~`1002` | |
  | `1020`/`1021` | `1003` | |
  | `1030`/`1031` | `1004` | |

#### 函数文件

- 现在采用函数系统：主包 v3 模板
- 根据新版的函数系统重构了文件架构，因此有大量的文件被重命名、移除、移动或新增，这里不再对函数文件的所有具体更改详细阐述，只对其中的主要更改进行必要解释
- 现在全体函数文件都采用了一个命名空间`aw`，以防和其他包体冲突
- 入口文件改为了`aw/system/main.mcfunction`，并采用了`1.21.0`的格式版本
- 在库方法代码内采用新版注释格式，更加简短，且能够避免重复描述行为，以及对前文应使用的`/execute`命令做出进一步指导
  - 以前：

    ```mcfunction
    # ===== (功能) =====
    # (功能描述)

    # 调用此方法时：
    # · 执行者(应设置的执行者)
    # · 执行位置(应设置的执行位置)
    # 输出结果：
    # · (声明更改的变量的值，或输出的变量)

    ```

  - 现在：

    ```mcfunction
    # ===== (功能) =====
    # (功能描述)
    # 调用此方法时：(无需修饰)/(需修饰……为……（execute ……）)

    ```

### 当前已知的问题

以下是当前地图内已知的问题。如果您遇到此问题，可以无视，等待后续版本解决。

- 在多人模式下，当玩家使用自己的第一人称视角时，会看到正在显示的玩家的脸（不会影响正在显示的玩家）
- 结束屋的玩家在移动时，是无动画平移过去的
- 在多人模式下，处于旁观模式的玩家可以从角落卡出房间

## Alpha 4.2_01b

> 发布于 25.07.14。该版本是 Alpha 4.2_01 版本的紧急修复版本。

- 紧急修复了一个手机版在 HUD 隐藏后，不显示操控键位而无法操作的问题。

## Alpha 4.2_02

> 发布于 25.08.03。

嗨！针对大家在上一个版本的问题反馈情况，我们在这里发布了新版本以处理这些问题。在本版本中，着重更新了退出重进机制和一些相关机制，例如死亡机制、重生机制等。虽然更新内容不多，不过还是有新东西在等着大家的哦。

### 漏洞修复与特性优化

- [#66](https://github.com/YZBWDLT/Adventure-World-4/issues/66) 在 7-4 新增了多个传送点位
- [#69](https://github.com/YZBWDLT/Adventure-World-4/issues/69) 现在会提醒玩家调整文本背景不透明度
- [#70](https://github.com/YZBWDLT/Adventure-World-4/issues/70) **现在 BOSS 战启用倒计时复活机制**
  - 在不同难度下，重生所需要的倒计时也越长
  - 目前仅限 6-4 和 7-5 的第 2 波启用了该机制
- 修复了一个判断是否正处于游戏中的变量错误判断的漏洞，因此，以下漏洞被同步修复
  - [#71](https://github.com/YZBWDLT/Adventure-World-4/issues/71) 在村庄结束剧情死亡会被记录为旁观者，并播报全体
  - [#83](https://github.com/YZBWDLT/Adventure-World-4/issues/83) 多人情况下，在 6-4 之前退出游戏并在 6-4 结束后（7-0 开始前）回到游戏会变成旁观者模式
- 现在 1-0 提供的皮革靴子也是锁定物品栏而非锁定槽位的了
  - [#76](https://github.com/YZBWDLT/Adventure-World-4/issues/76) 因此，修复了多人模式下，在 1-2 之前退出的玩家在 1-2 之后回归会导致其皮革靴子无法脱下的问题
- [#78](https://github.com/YZBWDLT/Adventure-World-4/issues/78) 修复了 1.21.80 后岩浆怪名字错误的问题
- [#87](https://github.com/YZBWDLT/Adventure-World-4/issues/87) 更改了结束后与鸽子的对话
- [#88](https://github.com/YZBWDLT/Adventure-World-4/issues/88) 现在御风珠可以再次对生物造成击退
- [#90](https://github.com/YZBWDLT/Adventure-World-4/issues/90) 压缩了资源包的大小，以减少其他玩家进入房间下载包所需要的时间：
  - 压缩了音乐的音质，现在为单声道音频，压缩到大小为原音频包的 28%
  - 更换并压缩了资源包图标的大小，由每张 406KB 降低到每张 66KB
  - 总的来看，资源包包体由 4.1 版本的 22.4MB 降低到 6.57MB，包体体积降低到原来的 29.33%
- [#91](https://github.com/YZBWDLT/Adventure-World-4/issues/91) 修复了在过剧情时退出游戏会导致其隐身状态仍然保留的问题
- [#92](https://github.com/YZBWDLT/Adventure-World-4/issues/92) 修复了在 7-0 死亡后会重生到 6-4 的问题
- 修复了恢复耐久的靴子和盾可以被扔出的漏洞
- [#95](https://github.com/YZBWDLT/Adventure-World-4/issues/95) 修复了过剧情时触控按钮会闪烁的漏洞
- 恢复了地图的 logo
- 现在在结束结算时，多人模式转单人模式后，不再为 F 级的评价，而是一个独立的评价：“无评价”
  - 同时，在无评价下和作者 NPC 们对话会采用多人模式下的默认对话
- 现在在结束结算时，如果有玩家开启了创造，系统会提示玩家本次没有成就或纪录

### 底层更新

- 进行了有关 HUD 的更改，移除了`data.allowHud`变量，现在 HUD 仅在开始、结束或退出重进时更改，而不再是循环执行；并移除了`aw/lib/modify_data/hud`函数
- 大幅更新了退出重进系统，为所有关卡新增了`events/player_rejoin`函数，并在特定关卡条件下执行关卡函数，这样可以高度自定义玩家在特定关卡下退出重进的行为，例如玩家退出重进后可以续上相机视角、HUD 设置、权限设置等
- 将`lib/modify_data/`中的函数部分移动到`lib/events/`中，以表示该类函数为一种“事件”函数，需在满足条件时单次执行以实现功能

## Alpha 4.2_02b

> 发布于 25.08.04。

Alpha 4.2_02b 对上个版本中出现的严重问题进行了修复。现在药水机制应该能正常运行了！

### 漏洞修复与特性优化

- 现在右侧信息板的版本号能正确显示为 Alpha 4.2_02 了
- [#97](https://github.com/YZBWDLT/Adventure-World-4/issues/97) 现在御风珠不再能造成伤害
- 现在扔出御风珠会像雪球一样有掷出动画
- 现在检测到过多的箭实体时不再给予玩家箭
- 修复了药水会在任意情况无限给予的漏洞
- 修复了结束特效无法进入张宇商店的漏洞
- 略微更改了作弊无成就的提示
  - 以前：因为你（们）本次有人开启了创造，因此本次不会获得任何成就和纪录！
  - 现在：本次游戏有人开启了创造模式，因此本次不会获得任何成就和纪录！
- 底层更新：移除了`data.allowArrowSupply`变量和`data.allowPotionSupply`变量，现在全部使用`supplyAllPotions`和`supplyArrow`标签代替原有的功能

## Alpha 4.2_03

> 发布于 25.08.29。

晚上好！今晚我们发布 Alpha 4.2_03，并在该更新中带来了一系列的新内容和改进！我们在本次更新中引入了全新的动效更新，它能够让你的地图变得更加生动活泼，你会在地图中看到许多我们精心设计的动画！同时，我们还修复了一个恶性漏洞，并对另一个恶性漏洞做了修复尝试。总之，一起来看看本次更新内容吧~

### 动效更新

- 隆重介绍小世界的一项重大更新 —— 动效更新！
- 此更新让地图中的 NPC 变得更加灵动，让一些视觉效果更加活泼
- 为村庄新增了后山和张宇商店的告示牌，以防玩家迷路
- 现在与 NPC 的对话会用醒目的品红色标明重点，就像苏醒和筑梦一样
- 现在在试炼中与 NPC 的传声石结晶对话会标明是第几句，就像结尾作者对话一样
- [#19](https://github.com/YZBWDLT/Adventure-World-4/issues/19) 新增了门
  - 现在每关的门是带动画地滑上去和滑下来的
  - 在关闭的时候，会播放关门的音效
  - 不同的章节下，门的样式是不一样的
- [#60](https://github.com/YZBWDLT/Adventure-World-4/issues/60) 新增了公告栏
  - 负责更“高级”地给我们打广告 :)
  - 会在村庄剧情中出现
  - 无法穿过
- [#61](https://github.com/YZBWDLT/Adventure-World-4/issues/61) [#72](https://github.com/YZBWDLT/Adventure-World-4/issues/72) 优化了大多数剧情的相机视角设计，因此现在多人模式下不再会满屏只看到正在显示的玩家的正脸
- [#93](https://github.com/YZBWDLT/Adventure-World-4/issues/93) 现在在 6-4 和 7-0（剑之神殿）中，“感觉身体轻飘飘的”现在拥有了漂浮效果
- [#94](https://github.com/YZBWDLT/Adventure-World-4/issues/94) 现在 NPC 拥有动作了！
  - 和筑梦一样，引入了同款动作
  - 这些动作会在剧情模式中生动地体现出来
  - NPC 说每句话时都能播放动作，有些特殊的话还有特别的大动作
  - [#73](https://github.com/YZBWDLT/Adventure-World-4/issues/73) 现在结束屋的玩家在移动时不再无动画地平移过去，而是有一个很明显的走路动作
  - [#79](https://github.com/YZBWDLT/Adventure-World-4/issues/79) 现在田英在 3-1 的动画中是躺下的了
  - 现在张宇在商店内默认是坐下的了
- 为结束特效第一阶段添加了筑梦相关的过渡动画
- 移除了退出重进玩家的相机动画，现在在他们进入游戏后仅维持应有的基本相机视角

### 漏洞修复与特性优化

- [#68](https://github.com/YZBWDLT/Adventure-World-4/issues/68) 修复了玩家可能卡出关卡的问题
- [#89](https://github.com/YZBWDLT/Adventure-World-4/issues/89) 现在在村庄剧情中，自动为玩家指路时间神殿的时限由 3 分钟延长到了 5 分钟
- [#96](https://github.com/YZBWDLT/Adventure-World-4/issues/96) 现在上一周目的玩家进入下一周目后不再会保留上一周目的数据（例如击杀数、死亡数等）
- [#98](https://github.com/YZBWDLT/Adventure-World-4/issues/98) 现在完成关卡或关卡失败会正确地重置药效
- 修复了 6-4 和 7-5 的倒计时重生机制的多个错误：
  - 现在难度 1~4 下的重生倒计时分别为 30、60、90、120 秒
  - 修复了在倒计时结束前没有标题提示玩家复活倒计时的问题
  - 修复了在 7-5 会错误地重生在 6-4 的问题
  - [#99](https://github.com/YZBWDLT/Adventure-World-4/issues/99) 修复了在死亡最大增益（抗性提升 V）的情况下，唤魔法师的火球依旧可以造成大量伤害的问题
- [#100](https://github.com/YZBWDLT/Adventure-World-4/issues/100) 现在死亡消息仅限在多人模式下播报
- 现在 6-3 的岩浆在 6-2 结束后和 6-3 失败后会正确初始化
- 修复了张宇商店可能因某些原因未开放的问题
- 修复了在高版本下，Minecraft 的内容日志会警告`blocks.json`的`format_version`未指定的问题
- 移除了 1.21.0 的版本限制
  - 因此，Vibrant Visuals 在本地图中可用

### 底层更新

- 新增了`gameId.@s`和`data.gameId`变量
- 将`lib/modify_data/`下的多个函数移动到了`lib/events/`下
- 将`lib/modify_data/states/`下的多个函数移动到了`lib/modify_data/`下
- 将`system/controller/`下的多个函数移动到了`system/`下
- 现在与 NPC 交互会触发关卡下的`levels/.../events/interact_with_npc`函数，而不再是统一在`entities/npc/interacted`列出

## Alpha 4.2_03b

> 发布于 25.08.29。

更新了 Alpha 4.2_03b 以解决 Alpha 4.2_03 中的一个关键问题。

### 漏洞修复与特性优化

- 修复了 3-4 的门漏了一个口子的问题
- 现在仅在试炼时才记录死亡榜

---

## Beta 4.2_01

> 发布于 25.09.06。

![beta_4_2_01_cover](/resources/adventure_world_4/update_log/4_2/beta_4_2_01_cover.png)

周末快乐！如你所见，我们的地图已经正式进入了 Beta 阶段！

在本次更新中，我们补齐了本次更新的最后一块大拼图——路线引导机制。现在，在每关结束后，都会出现一个引导点指引你走向何道路。这是一个呼声很高的功能，所以我们很早就决定加入进来，今天它来了，终于不用怕迷路啦！

### 路线引导机制

- 隆重介绍——路线引导机制！
- [#9](https://github.com/YZBWDLT/Adventure-World-4/issues/9) 在关卡结束之后，会有一个蓝色的跳动叹号图案——引导点指引你接下来的路
- 离得越远，引导点的图标就越大
- 为 3-1 的水道添加了必要的指引告示牌
- 以后再也不用怕迷路啦！

### 音乐

- 现在剪掉了音乐的前后空白片段，不再会有空白过渡
- [#105](https://github.com/YZBWDLT/Adventure-World-4/issues/105) 现在除了 7-5 外，有更多的音乐分前奏和主旋律了，前奏只播放一次，而主旋律循环播放
- 典型的例子有各大 BOSS 战、和沙漠神殿
- 移除了村庄音乐的第二备选，因为在现在这个模式下，第二备选会出现问题
- 继续进行了一定程度的压缩，以降低存储占用
- **已知问题：3-4 的音乐连贯性不是很好，后续仍需进一步优化**

### 玩家血量

- 现在能够实时显示到玩家名牌下方了！
- 这在多人模式下可能会很有用

### 漏洞修复与特性优化

- [#86](https://github.com/YZBWDLT/Adventure-World-4/issues/86) 现在在单人模式下，进入林乐家楼下会自动隐藏外部的 NPC 和展示文本
  - 然而，多人模式下仍然会正常显示外部的 NPC 和展示文本
- [#102](https://github.com/YZBWDLT/Adventure-World-4/issues/102) 现在二周目开启剧情模式是从 0-1 开启的了，而不是 1-0
- [#107](https://github.com/YZBWDLT/Adventure-World-4/issues/107) 修复了多人情况下，和张宇的聊天仍然被遮挡视角的问题
- [#108](https://github.com/YZBWDLT/Adventure-World-4/issues/108) 修复了在开幕时，或在结束后开启二周目时，展示文本仍然清晰地显示在玩家面前的问题
- [#109](https://github.com/YZBWDLT/Adventure-World-4/issues/109) 修复了多人情况下，在强行过剧情的玩家可能会在意外的地点死亡的问题
- [#110](https://github.com/YZBWDLT/Adventure-World-4/issues/110) 修复了多人情况下，玩家可能因网络波动而错误地复活在上一关的问题
- [#111](https://github.com/YZBWDLT/Adventure-World-4/issues/111) 修复了多人情况下，结束剧情不会对玩家隐身的问题
- [#112](https://github.com/YZBWDLT/Adventure-World-4/issues/112) 修复了多人情况下，玩家可以在 2-1 通过不断推拉活塞卡出房间的问题
  - 然而，仅修复了此漏洞在 2-1 游戏时的情况，因为 2-1 结束后已不再会导致卡关（结束前可能会卡存活玩家数，但结束后至少能留一位玩家在场景内），并且可能会导致错判，造成性能浪费，综合以上因素考虑，只修复该漏洞最严重表现的部分
  - 我们还留了一个告示牌小彩蛋 (～￣▽￣)～
- 修复了结束剧情主线剧情对话过程中和张宇对话会导致卡住的问题
- 修复了村庄对话中和田英初次对话的检查范围过小的问题
- 修复了在游戏中时，单人模式退出重进后玩家仍然会被强制传送到重生点的问题，现在单人模式回到游戏后位置不再受到影响
- 现在剧情模式下，3-1 的动画中田英是躺在神殿上方而不是树上睡觉的了

## Beta 4.2_01b

> 发布于 25.09.10。

![beta_4_2_01b_cover](/resources/adventure_world_4/update_log/4_2/beta_4_2_01b_cover.png)

下午好！这是一次小更新，我们为游戏添加了迷雾，并在一定程度上简化了一些装饰。

### 迷雾

- [#103](https://github.com/YZBWDLT/Adventure-World-4/issues/103) 添加了迷雾
- 不同的神殿会有不同颜色的迷雾
- 前六章的迷雾相对柔和，但第七章则相对“阴间”一些

### 漏洞修复与特性优化

- [#111](https://github.com/YZBWDLT/Adventure-World-4/issues/111) 再次修复了多人模式下结束剧情不会对玩家隐身的问题
- [#113](https://github.com/YZBWDLT/Adventure-World-4/issues/113) 进行了一定的装饰简化
  - 移除了部分关卡的部分墙、台阶、楼梯、蜘蛛网
  - 移除了部分关卡的部分高草、高海草、海带，防止有时无法击中怪物
  - 移除了 2-3 异常的发光地衣和 6-2 异常的紫水晶簇
  - 移除了 7-5 的两处火焰，现在不再那么容易踩到火了
- [#117](https://github.com/YZBWDLT/Adventure-World-4/issues/117) 因测试员们的强烈意愿，现在烈焰之魂又回到了它最忠诚的名字
- [#118](https://github.com/YZBWDLT/Adventure-World-4/issues/118) 现在不再能在时间神殿门口的对话提前看到田英
- [#122](https://github.com/YZBWDLT/Adventure-World-4/issues/122) 修复了 2-1 无法顺水流游上平台的问题
- [#123](https://github.com/YZBWDLT/Adventure-World-4/issues/123) 现在玩家的血量不再显示为负数
- [#124](https://github.com/YZBWDLT/Adventure-World-4/issues/124) 修复了 3-4 失败后无法再次进入的问题
- 现在 7-5 在跳进坑后会正确地移除引导点
- 现在 6-4 和 7-5 在单人情况下死亡后不再提示 30 秒后重生了

### 底层更新

- 现在实体门有翻译名字，不再显示为`entity.aw:door.name`了（虽然玩家几乎无法看见门的名字）
- 将门实体的`hill`字段统一换成了`mountain`，以和其他内容保持一致
- 现在清除怪物物品会同时清除生成器了
- 统一了游戏内所有迷雾的`用户提供 ID`为`gameFog`，并移除了`aw/lib/modify_data/init/fog`

## Beta 4.2_01c

> 发布于 25.09.10。

发布了 Beta 4.2_01c 以修复一个多人模式下失败功能完全失效的问题。

- [#121](https://github.com/YZBWDLT/Adventure-World-4/issues/121) 紧急修复了多人情况下，关卡失败会导致非最后死亡的玩家集体重生到本关重生点的问题  
  备注：*这有可能是我们目前遇到的最恶性的漏洞之一，它直接导致多人模式下的关卡失败功能完全无法正常运行。关于此漏洞的详细机理，我们在该漏洞的汇报页面有着详细的记载。总之，此漏洞的严重性迫使我们不得不立刻发布 Beta 4.2_01c 版本。*
- [#126](https://github.com/YZBWDLT/Adventure-World-4/issues/126) 修复了多人情况下，6-4 和 7-5 在玩家复活后未给予药水的问题

## Beta 4.2_02

> 发布于 25.09.20。

![beta_4_2_02_cover](/resources/adventure_world_4/update_log/4_2/beta_4_2_02_cover.png)

晚上好！经过我们几天不懈的努力，我们终于把最后一个说大不大说小不小的功能给端上来了——准确来讲，是三个小功能。我猜，你们应该很想要……**退出试炼**吧！没错，如果速通的时候玩飘了，那么退出试炼可以帮助你快速地退出重开一把，节省你的时间。但这个更新并不止于此，你们是不是还想要……**主动旁观**？比如打着打着突然有事需要挂机，但是占用一个玩家位置又容易导致难度上升？那好办！我们这个版本就带来了主动旁观！还有更惊喜的，我们还带来了**单关卡试炼**！单关卡试炼允许你能够任选一个关卡进行试炼，如果你特别喜欢打 BOSS 关，那么这个功能可以说是为你量身定制的了！

以及，与此同时，我们郑重宣布——这将会是最后一个 Beta 版本！我们已经完成了所有预期完成的小计划，接下来的就是一些更小的计划了，比如成就功能会随着这次的单关卡试炼的推出而进行适度调整。距离发布日不远了，这张地图的开发周期即将结束，准备好完结撒花了吗？>w\<

### 退出试炼

- [#81](https://github.com/YZBWDLT/Adventure-World-4/issues/81) 现在在二周目后可以退出试炼了！
- 右键（手机长按）使用退出试炼物品可以进入暂停房间
  - 是一个红色箭头物品，取自《30 种死法 2》
  - 会在二周目后给予此物品
  - 必须在试炼状态下、非关卡状态下才能使用此物品
  - 此外，有些特殊情况也不能使用此物品
- 在暂停状态下，试炼会暂停计时、播放剑之试炼入口的音乐、无法使用御风珠和弓箭、也无法进入关卡
- 多人模式下，只需要一名玩家使用该物品即可进入暂停状态
  - 如果有玩家滥用退出试炼导致游戏无法正常进行，也可以使用`/tag (玩家名字) add cannotQuit`阻止该玩家使用此物品
- 在暂停房间可以选择继续试炼或退出试炼
  - 继续试炼仅需一名玩家同意即可继续
  - 而退出试炼则必须所有玩家选择退出方可退出

### 主动旁观

- [#63](https://github.com/YZBWDLT/Adventure-World-4/issues/63) 现在在多人模式下可以选择主动旁观了！
- 多人模式右键（手机长按）使用主动旁观物品可以启用主动旁观
  - 该物品长得像 QQ 中的鬼魂表情，还是很可爱的哦
  - 必须在试炼状态下、非关卡状态下才能使用此物品
- 启用或关闭了主动旁观的玩家，会自动进行播报
- 如果所有玩家都启用主动旁观，进入关卡会直接失败
  - 因此，如果所有玩家都启用，会在聊天框弹出来一个红色的警告，警告所有玩家
- 处于主动旁观模式下的玩家，进入关卡后会自动变成旁观模式，且在关卡内不会“复活”
- 当游戏内只剩余 1 名玩家后，主动旁观机制会立刻失效，物品会被清除，且主动旁观状态会立刻解除

### 单关卡试炼

- [#80](https://github.com/YZBWDLT/Adventure-World-4/issues/80) 现在在二周目后可以选择单关卡试炼了！
- 单关卡试炼允许玩家在开始试炼前，选择一个特定的关卡游玩
- 在玩家进入试炼之后，会被直接传送到玩家选择的关卡，然后给予玩家物品，并给玩家 4 秒的准备时间，随后试炼便正式开始
- 玩家成功或失败都会自动退出试炼
- 在单关卡试炼模式下，不能退出试炼，也不能主动旁观
- 在单关卡试炼模式下，不会记录击杀数、死亡数、喝药情况等，所有行为都不会影响当前的评分

### 漏洞修复与特性优化

- 彻底移除了在 4.0 时期添加的怪物生成粒子
- [#68](https://github.com/YZBWDLT/Adventure-World-4/issues/68) 再次修复了其他玩家可能会被关在外面的问题  
  作者注：*经过实测，现在能够较好地处理意外被关在外面的问题，比如关门时被门挤出去。然而对于网络较差的玩家，在他们进门的一瞬间就立刻跑出还是有可能无法捕捉。我们已经尽了最大努力解决这个问题，目前已经是最优解了。此外，被挤出去的玩家在往门的方向走时也仍然可以被传送回来。*
- 同时，修复了玩家可能会钻空子躲避各关门口检测区域的问题
- 现在剧情模式下，结束后从试炼入口回到村庄会再次显示剧情模式独有的 NPC 了
- 现在在 3-2 和 3-4 失败后，水可以及时地被清理掉了
- 在一周目作弊的情况下，现在开启二周目不会允许玩家调整难度和单关卡试炼
- 更新了寒冰神殿的字体颜色，变得更蓝了

### 底层更新

- 新增变量`data.allowQuit`，代表当前是否启用退出，`0`为禁用，`1`为启用
- 新增变量`data.pausing`，代表是否正在暂停游戏，`0`为未暂停，`1`为暂停
- 将标签型变量`spectator`升级为记分板变量`spectator.@s`，并添加了状态`2`为启用主动旁观
- 新增变量`data.isSingleLevel`，代表当前是否为单关卡试炼，`0`为全流程，`1`为单关卡

## 4,2 - Pre 1

> 发布于 25.09.25。

![4_2_pre_1_cover](/resources/adventure_world_4/update_log/4_2/4_2_pre_1_cover.png)

中午好！从本版本开始，我们正式进入 Pre 版本的测试阶段！在该测试阶段，我们主要对地图进行一些小修小补，同时完成最后剩下的任务。在剩下的几天中，Pre 版本的更新会比较频繁，所以大家的测试记录规则也发生了一点变化，主要是从本版本开始，测试 Pre 版本的旧版也可以照常记录。例如，如果在我们发布 Pre 2 后，你还在测试 Pre 1，那么 Pre 1 的记录仍然是有效的。当然，还是尽你们之所能，尽量卡 bug 吧~

### 单关卡试炼

- 现在单关卡试炼的准备时间由 4 秒延长到了 15 秒，并会在准备阶段给予药水
- [#128](https://github.com/YZBWDLT/Adventure-World-4/issues/128) 现在从主动旁观模式结束全流程后进行单关卡试炼，不再会应用主动旁观的设置了
- [#134](https://github.com/YZBWDLT/Adventure-World-4/issues/134) 现在单关卡试炼在正式开始关卡之前都不再能移动了
- [#138](https://github.com/YZBWDLT/Adventure-World-4/issues/138) 现在在试炼入口调整单关卡试炼的关卡号时，即使退出、重新开始游戏之后也可以保留了
- 修复了玩家在主动旁观模式下退出，并在单关卡试炼下进入仍保持主动旁观的问题
- 修复了单关卡 2-2、2-3、3-2、3-3、3-4 的重生点错误的问题
- 现在玩家在准备过程中退出并重新进入也不再会出现问题了

### 结束结算

- 现在结束结算数据以通关时的数据为准，而不再以该数据的实时数据为准
  - 例如，当通关时有 5 人，那么退出到只剩 1 人时，NPC 的对话和结算数据仍然以 5 人时的数据展现
  - 因此，移除了 Alpha 4.2_02 引入的“无评价”的设定，因为如果玩家在多人情况下完成地图，现在完全不会看到评价
- 现在结束结算数据能够显示多人通关时的玩家人数了
- 撤除了水晶哥的 NPC，换为硫化银
- 撤除了风暴的 NPC，换为橘子
- 新增了 lanos、命令块、海王星、小飞侠、鱼周、王牌、残梦的 NPC
  - 其中小飞侠和王牌目前没有上传皮肤，也没有留言，所以目前显示的内容并非留言
- 更新了制作人名单，新增了 4 页的 Alpha 和 Beta 版本的测试员名单

### 漏洞修复与特性优化

- [#129](https://github.com/YZBWDLT/Adventure-World-4/issues/129) 修复了只有在完成二周目后才能在三周目及之后获取退出试炼物品的问题
- [#130](https://github.com/YZBWDLT/Adventure-World-4/issues/130) 修复了从 10-3（试炼入口）回到 10-2（村庄）后，在村庄死亡会重生到试炼入口的问题
- [#131](https://github.com/YZBWDLT/Adventure-World-4/issues/131) 修复了在 3 人或更多玩家时未能提示谁选择了继续试炼的问题
- [#132](https://github.com/YZBWDLT/Adventure-World-4/issues/132) 修复了 3-1 的剧情中，迷雾未被撤除的问题
- [#133](https://github.com/YZBWDLT/Adventure-World-4/issues/133) 现在能够正确初始化退出重进玩家的旁观信息
- [#135](https://github.com/YZBWDLT/Adventure-World-4/issues/135) 现在退出试炼能够正常使用了
- [#136](https://github.com/YZBWDLT/Adventure-World-4/issues/136) 恢复了 2-1 的彩蛋告示牌内容
- [#137](https://github.com/YZBWDLT/Adventure-World-4/issues/137) 修复了退出后不会修改玩家游戏模式的问题（尤其是单关卡试炼下）
- 修复了在开幕时玩家仍能保持物品的问题
- 修复了在开幕时，玩家重新进入时错误地使部分命令选中全体玩家的问题

### 底层更新

- 将开启单关卡试炼的相关代码从结束剧情的`aw/levels/end/stage3`中分离了出来，现在统一集合到`aw/levels/end/stage4`中
- 将 10-3 的临时变量`settings.temp.level`正式升级为全局变量`settings.level`
- 新增了一个用于查询`settings.level`的值的函数`aw/developer/query/level_settings`
- 新增了一个用于安全移除门的方法`aw/lib/events/remove_door`
- 新增了多个`record`记分板下的变量，用于记录通关时的数据
- 移除了最佳分数的记录`record.bestScore.xxx`

## 4.2 - Pre 2

> 发布于 25.09.26。

![4_2_pre_2_cover](/resources/adventure_world_4/update_log/4_2/4_2_pre_2_cover.png)

芜\~\~\~湖！终于，我们把最后一个新内容给端上来啦——新成就！现在有了 16 种全新的成就，同时沿用了以前的 8 个成就。这些成就有技术性的困难成就，有整活的成就，还有一些隐藏成就……来试试这些成就的“咸淡”吧！

### 成就

- [#114](https://github.com/YZBWDLT/Adventure-World-4/issues/114) 引入了 16 个全新的成就！
  - **出神入化**：（单人）获得 S 级评价
  - **狙击手的对决**：（单人）射杀 60 只以上的骷髅或流浪者通过试炼
  - **别问，问就是陷阱**：不使用 2-2 的机关通关
  - **全身而退**：不受伤通过 2-3
  - **全身而退 II**：不受伤通过 3-4 的第 3 波
  - **身轻如燕**：不穿皮革靴子通过 4-3
  - **我以为挂机池呢**：不击杀任何怪物通过 4-4
  - **太亢奋了**：在 1 分钟内秒掉烈焰之魂
  - **闪避点满**：不踩到火，不掉进岩浆通过 7-5
  - **出师未捷身先死**：死于 1-1
  - **让开，这里归我了！**：趴进棺材里……？
  - **骷髅王的宝藏**：……那真是宝藏吗？
  - **躲这里不错**：找到 3-2 的一个隐藏按钮
  - **上房揭瓦**：找到 7-2 的一个隐藏按钮
  - **耐砸王**：被 7-5 的火球砸 3 回，三回啊三回！
  - **还是跑酷大佬**：跑上时间神殿的最顶端
- 移除了单人游戏下的完成各级难度的成就，和无药通关的成就
  - 前者，为使所有成就不必局限于过高难度而设计；
  - 后者，实际上是被加强了条件，现在对应的成就是**出神入化**，该成就现在还要求一命、60 分钟内通关
  - 不过，**出神入化**事实上也可以通过完成高难度更容易地获取，例如一命通关难度 2
- 移除了多人游戏下的**全靠我带飞**成就，该成就要求有玩家击杀数大于 200
- 除了（单人）（多人）标记的成就之外，其他成就都是即时完成，即时提示的，并且单人和多人均可完成

### 漏洞修复与特性优化

- 下调了 S 级评价和各类评价的标准，现在只需要在 60 分钟内一命无药通关难度 1 或一命通关难度 2 即可获得 S 级评价
- 修复了一个记录无法获取是否作弊，导致各大测试员的作弊对话无法触发的问题
- 同步了小飞侠的对话
- 修复了 lanos 的对话在 30:00 ~ 30:59 仍然可以触发的问题
- 修复了两个速通成就在 45:00 ~ 45:59 仍然可以触发的问题
- 修复了评级判定中，分钟数的判据为`<=`的关系问题，现在为`<`的关系了
  - 例如，以前试炼时长这一指标需要分钟数为 60 分钟以内，以前的判定方法是分钟数≤60，现在改为了分钟数\<60，以防止 60:00 ~ 60:59 仍然可以触发
- 修复了世界 logo 错误的问题
- 修复了 2-1 的水源被默认打开的问题

### 底层更新

- 移除了成就查询函数`developer/query/achievements`，现在应统一使用`developer/query/variables`查询

## 4.2 - Pre 3

> 发布于 25.09.27。

我们现在发布 Pre 3 以优化几个内容。

- 更新了帕的皮肤
- 堵死了 7-4 的一个小坑洞，它可能会导致岩浆怪卡在里面不出来，浪费玩家时间
- 修复了成就[让开，这里归我了！]的一个方向判定错误
- 现在主动旁观玩家不会触发 4-3 的穿着靴子的条件
- 现在 3-4 第 3 波在完成成就后会立刻公布，而不是关卡结束后公布了
- 现在两个找按钮的成就在关卡完成后也能完成了

## 4.2 - Pre 4

> 发布于 25.09.27。

我们现在发布 Pre 4 以优化几个内容。

- 添加了一个“评分细则”的按钮，可以查看单人模式下的评分细则以判断如何获得 S 级评价了
- 现在会检查玩家获得的成就数量，并随之替换地板为铁材质（成就过半）或金材质（全成就）
- 更新了命令块和小鼠的留言
- 现在在获取了全成就后会像《30 种死法 2》一样放烟花了
- 修复了高版本下在单关卡试炼中不能正确地显示快捷栏的问题
- [#57](https://github.com/YZBWDLT/Adventure-World-4/issues/57) 加大了 6-4 岩浆粒子的密度

## 4.2 - RC 1

> 发布于 25.09.28。

- 引入了 @jincarrot 的 ModSAPI，并进行了一定修改以适配中国版
- 适配了中国版的屏蔽词
- 更改了星辰的对话，移除了王牌的 NPC
- 移除了国际版包和中国版包，并将主包升级至4.2.0
- 现在游戏内版本号也显示为 4.2 了

## 4.2 - RC 2

> 发布于 25.09.29

- 修正了萝卜在鸣谢名单中和 E 尘重叠的问题
- 处理了部分脚本问题
- 修正了一开始的悬浮文本问题

## 4.2

> 群内于 25.09.30 公布，国际版预计发布于 25.10.01，中国版预计发布于 25.10.03。相比于 RC 2，该版本修复了单关卡试炼未显示打开物品栏按钮的问题。

嗨~！欢迎你来查看本次的更新！本次的更新是本地图的「收山之作」——不出意料的话，这是我们最后一次更新这张地图。但也正因如此，我们不想在这张地图留下遗憾，因此这次有超级多的新内容在等着大家！如果你是老玩家，你会看到我们的新技术在这张地图的全新应用；而如果你是新玩家，你会看到我们在这张地图献出的满满诚意，并且我敢向你保证——这张地图一定会是你玩过的最出色的 PVE 地图之一。

《冒险小世界：剑之试炼》作为我（量筒）和巴豆（冒险世界系列地图作者）的联合作品，也是冒险世界系列的第 4 部作品，有很多游戏元素自然也融合了我们的考量。我们也很清楚，有些很有意思的元素放在地图里可以变得更好玩更有趣，但是我们为了承接上文而引起下文，就没有这么做。承接的上文就是《冒险世界：苏醒》，这张地图虽然相对古老了一些，但其中不乏一些有新意的创意，我们也会在未来重制这张地图；而至于引起的下文，就是巴豆即将推出的《冒险世界：筑梦》，这张地图我们预计春节发布，它也将会是你玩过的最出色的 RPG 地图之一！

最后，再次感谢参与本次测试的 30 多位测试群群友，是你们的高水平高质量的测试造就了这张地图！也同时感谢那些为本地图提供技术支持的大佬们，尤其是 @萝卜 的 ModSAPI，方便了我们将地图同步到中国版；和 @祉语 的测试服务器，方便了我们进行多人联机测试，造就了本地图优秀的多人联机逻辑。

本次更新的主要亮点和内容有：

- 基于旁观模式的新旁观机制
- 路线引导机制
- 动效更新
- 单关卡试炼
- 退出试炼
- 新成就与纪录更改
- 玩家物品更改
- 关卡更改
- 剧情与作者留言更改
- 细节与氛围更新
- 底层翻新
- 漏洞修复

### 基于旁观模式的新旁观机制

- **移除了以前那个区域小、视野也小的观战区，现在使用正宗的旁观模式进行旁观**
- 如果出界，会提示你不能出界，并将你拉回到房间
- 这个更新极大地扩大了以往观战区的功能，现在你可以在任何一个不贴墙的角落观察到你的队友的动向！
- 然而，我们也在多人测试中注意到，如果玩家快速移动是可能无法捕捉到旁观玩家的，这是由 Minecraft 的固有性质引起的，网络波动大的玩家更容易“逃脱”，所以请尽可能避免在旁观时快速移动，如果出界也请回到观战区观看。君子游戏，拜托啦~
- 现在在多人模式下，你可以选择主动旁观了！
  - 多人模式右键（手机长按）使用主动旁观物品可以启用主动旁观
    - 该物品长得像 QQ 中的鬼魂表情，还是很可爱的哦
    - 必须在试炼状态下、非关卡状态下才能使用此物品
  - 启用或关闭了主动旁观的玩家，会自动进行播报
  - 如果所有玩家都启用主动旁观，进入关卡会直接失败
    - 因此，如果所有玩家都启用，会在聊天框弹出来一个红色的警告，警告所有玩家
  - 处于主动旁观模式下的玩家，进入关卡后会自动变成旁观模式，且在关卡内不会“复活”
  - 当游戏内只剩余 1 名玩家后，主动旁观机制会立刻失效，物品会被清除，且主动旁观状态会立刻解除

### 路线引导机制

- 隆重介绍——路线引导机制！
- 在关卡结束之后，会有一个蓝色的跳动叹号图案——引导点指引你接下来的路
- 离得越远，引导点的图标就越大
- 为 3-1 的水道添加了必要的指引告示牌
- 为村庄新增了后山和张宇商店的告示牌，以防玩家迷路
- 但是，在中国版，我们也观察到透过透明渲染的物体（无论是方块还是实体）都会导致显示不正确，所以效果可能会差一些
- 以后再也不用怕迷路啦！

### 动效更新

- 隆重介绍小世界的一项重大更新 —— 动效更新！
- 此更新让地图中的 NPC 变得更加灵动，让一些视觉效果更加活泼
- 现在与 NPC 的对话会用醒目的品红色标明重点，就像苏醒和筑梦一样
- 现在在试炼中与 NPC 的传声石结晶对话会标明是第几句，就像结尾作者对话一样
- 启用了新式的怪物生成动效，现在怪物在生成前会直接显示为对应的模型，而不是抽象的对应颜色的粒子了
- 现在每关的门是带动画地滑上去和滑下来的。在关闭的时候，会播放关门的音效。不同的章节下，门的样式是不一样的
- 新增了公告栏，负责更“高级”地给我们打广告 :) 会在村庄剧情中出现，并且无法穿过
- 现在在 6-4 和 7-0（剑之神殿）中，“感觉身体轻飘飘的”现在拥有了漂浮效果
- 现在 NPC 拥有动作了！
  - 这些动作会在剧情模式中生动地体现出来
  - NPC 说每句话时都能播放动作，有些特殊的话还有特别的大动作
  - 现在结束屋的玩家在移动时不再无动画地平移过去，而是有一个很明显的走路动作
  - 现在田英在 3-1 的动画中是躺在神殿上睡觉的了
  - 现在张宇在商店内默认是坐下的了
- 为结束特效第一阶段添加了下一作——《冒险世界：筑梦》相关的过渡动画

### 单关卡试炼

- 现在在二周目后可以选择单关卡试炼了！
- **单关卡试炼允许玩家在开始试炼前，选择一个特定的关卡游玩**
- 单关卡试炼的设置是保留的，这意味着你可以在玩完一关之后方便地开启下一关
- 在玩家进入试炼之后，会被直接传送到玩家选择的关卡，然后给予玩家物品，并给玩家 15 秒的准备时间，随后试炼便正式开始
- 玩家成功或失败都会自动退出试炼
- 在单关卡试炼模式下，不能退出试炼，也不能主动旁观
- 在单关卡试炼模式下，不会记录击杀数、死亡数、喝药情况等，所有行为都不会影响当前的评分
- 但是，在一周目作弊的情况下，现在开启二周目不会允许玩家单关卡试炼

### 退出试炼

- **现在在二周目后可以退出试炼了**！
- 右键（手机长按）使用退出试炼物品可以进入暂停房间
  - 是一个红色箭头物品，logo 取自《30 种死法 2》
  - **会在二周目后给予此物品**
  - 必须在试炼状态下、非关卡状态下才能使用此物品
  - 此外，有些特殊情况也不能使用此物品
- 在暂停状态下，试炼会暂停计时、播放剑之试炼入口的音乐、无法使用御风珠和弓箭、也无法进入关卡
- 多人模式下，只需要一名玩家使用该物品即可进入暂停状态
  - 如果有玩家滥用退出试炼导致游戏无法正常进行，也可以使用`/tag (玩家名字) add cannotQuit`阻止该玩家使用此物品
- 在暂停房间可以选择继续试炼或退出试炼，继续试炼仅需一名玩家同意即可继续，而退出试炼则必须所有玩家选择退出方可退出

### 新成就与纪录更改

- 引入了 16 个全新的成就！
  - **出神入化**：（单人）获得 S 级评价
  - **狙击手的对决**：（单人）射杀 60 只以上的骷髅或流浪者通过试炼
  - **别问，问就是陷阱**：不使用 2-2 的机关通关
  - **全身而退**：不受伤通过 2-3
  - **全身而退 II**：不受伤通过 3-4 的第 3 波
  - **身轻如燕**：不穿皮革靴子通过 4-3
  - **我以为挂机池呢**：不击杀任何怪物通过 4-4
  - **太亢奋了**：在 1 分钟内秒掉烈焰之魂
  - **闪避点满**：不踩到火，不掉进岩浆通过 7-5
  - **出师未捷身先死**：死于 1-1
  - **让开，这里归我了！**：趴进棺材里……？
  - **骷髅王的宝藏**：……那真是宝藏吗？
  - **躲这里不错**：找到 3-2 的一个隐藏按钮
  - **上房揭瓦**：找到 7-2 的一个隐藏按钮
  - **耐砸王**：被 7-5 的火球砸 3 回，三回啊三回！
  - **还是跑酷大佬**：跑上时间神殿的最顶端
- 移除了单人游戏下的完成各级难度的成就，和无药通关的成就
  - 前者，为使所有成就不必局限于过高难度而设计；
  - 后者，实际上是被加强了条件，现在对应的成就是**出神入化**，该成就现在还要求一命、60 分钟内通关
  - 不过，**出神入化**事实上也可以通过完成高难度更容易地获取，例如一命通关难度 2
- **下调了 S 级评价和各类评价的标准**，现在只需要在 60 分钟内一命无药通关难度 1 或一命通关难度 2 即可获得 S 级评价
- 移除了多人游戏下的**全靠我带飞**成就，该成就要求有玩家击杀数大于 200
- 除了（单人）（多人）标记的成就之外，其他成就都是即时完成，即时提示的，并且单人和多人均可完成
- 现在在获取了全成就后会像《30 种死法 2》一样放烟花了
- 现在成就不再能多次获取
- **现在成就必须在非作弊模式下才能获取**
- 现在会检查玩家获得的成就数量，并随之替换地板为铁材质（成就过半）或金材质（全成就）
- 现在在结束结算时，如果有玩家开启了创造，系统会提示玩家本次没有成就或纪录
- 现在最佳时间将分为单人和多人，不再共用
  - 例如，以前如果单人模式打难度 2，花费了 70 分钟，多人打难度 2 花了 35 分钟，那么最佳时间就会是难度 2 为 35 分钟
  - 现在同样的情况下，将分别记录为单人难度 2 花了 70 分钟和多人难度 2 花了 35 分钟
- 现在结束结算数据以通关时的数据为准，而不再以该数据的实时数据为准
  - 例如，当通关时有 5 人，那么退出到只剩 1 人时，NPC 的对话和结算数据仍然以 5 人时的数据展现
- 添加了一个“评分细则”的按钮，可以查看单人模式下的评分细则以判断如何获得 S 级评价了

### 玩家物品更改

- **现在使用御风珠来代替绳枪**，以和冒险世界（包括冒险世界：筑梦）系列的其他类似物品保持一致
  - 同时，移除了物品准星
  - 现在御风珠（以前的绳枪）的误判率是 0% 了，~是的，就是这么自信~
  - 现在扔出御风珠会像雪球一样有掷出动画
- **现在弓箭秒杀骷髅可以正确地计入击杀数**
- **现在钻石头盔和钻石靴子不再需要玩家手持一次，是直接给予的了**
- 现在物品是每秒检测一次，并供应缺少的物品的，而不再是在特定时机检测并供应了
- 现在 1-0 提供的皮革靴子也是锁定物品栏而非锁定槽位的了
  - 因此，修复了多人模式下，在 1-2 之前退出的玩家在 1-2 之后回归会导致其皮革靴子无法脱下的问题

### 关卡更改

- 现在当失败达到 10 次后，会提供一个抗性提升 V（无敌）的效果
- 对 6-4 中烈焰之魂的技能进行了全面削弱，以降低无药通关的难度：
  - 涨落岩浆的间隔由 8\~20 秒延长为了 15\~30 秒
  - 恢复血量的间隔由 3 秒延长为了 6 秒
  - 召唤怪物的间隔由 3\~10 秒（二阶段）和 3\~5 秒（三阶段）延长为了 6\~10 秒（二阶段）和 6\~8 秒（二阶段）
  - 随机传送的间隔由 6\~10 秒延长为 10\~15 秒
- 现在仅限有中型或大型岩浆怪的波潮会启用关卡完成倒计时，而不再为有岩浆怪的关卡全关启用关卡倒计时。
  - 这个更改会使一些关卡的进程（例如 7-1、7-2）更顺滑一些
- **现在在 7-5 中，当 BOSS 使用火球攻击时，不再能使用盾挡住这次伤害**
- 在 7-4 新增了多个传送点位
- **现在 BOSS 战启用倒计时复活机制**
  - 在不同难度下，重生所需要的倒计时也越长，难度 1~4 下的重生倒计时分别为 30、60、90、120 秒
  - 仅限 6-4 和 7-5 的第 2 波启用了该机制
- 进行了一定的装饰简化
  - 移除了部分关卡的部分墙、台阶、楼梯、蜘蛛网
  - 移除了部分关卡的部分高草、高海草、海带，防止有时无法击中怪物
  - 移除了 2-3 异常的发光地衣和 6-2 异常的紫水晶簇
  - 移除了 7-5 的两处火焰，现在不再那么容易踩到火了
- 在一周目作弊的情况下，现在开启二周目也不会允许玩家调整难度

### 剧情与作者留言更改

- **重新设计了全部剧情的相机镜头**
- 统一了中国版和国际版的剧情内容，不再单独做出适配
- 现在在结束剧情中，田英将告知玩家的死亡次数，而不再是总的关卡失败次数
- 移除了一个严重违规成员的制作人表
- 现在结束结算数据能够显示多人通关时的玩家人数了
- 对结束剧情的作者 NPC 们进行了多项更改：
  - 现在显示的都是 4.2 版本的测试员了，因此撤除了水晶哥和风暴的 NPC
  - 新增了硫化银、橘子、lanos、命令块、海王星、小飞侠、鱼周、残梦的 NPC，并新增了他们的留言
  - 更改了结束后与量筒、巴豆、鸽子、小鼠、比翼鸟、星辰等人的对话
  - 对于中国版，受限于中国版投稿的限制，非原创的皮肤会对应地替换为 Alex 和 Steve，这应当只在中国版上生效
- 更新了制作人名单，新增了 4 页的 Alpha 和 Beta 版本的测试员名单

### 细节与氛围更新

- 对音乐系统做了一些更改：
  - **大幅压缩了音乐包的大小，以减少其他玩家进入房间下载包所需要的时间**
  - **现在有更多的音乐分前奏和主旋律了，前奏只播放一次，而主旋律循环播放**
  - 剪掉了音乐的前后空白片段，不再会有空白过渡
  - 典型的例子有各大 BOSS 战、和沙漠神殿
  - 移除了村庄音乐的第二备选，因为在现在这个模式下，第二备选会出现问题
- 添加了迷雾
  - 不同的神殿会有不同颜色的迷雾
  - 前六章的迷雾相对柔和，但第七章则相对“阴间”一些
- 对右侧的信息板做出了一些更改
  - 现在不再尝试实时监测玩家位置，因其实用用途不大；因此，右侧信息板也不再实时返回玩家所处关卡位置
  - 现在不再在怪物生成后检查最大怪物数
  - **现在死亡榜可以记录一切死亡的数据，而不光是仅在游戏中记录死亡数据了**
    - 例如，如果你在 2-0 和 2-1 的过道中被陷阱杀死了，在 4.0 版本和 4.1 版本时会因为你未在游戏中而不计入死亡数，但是 4.2 版本会计入了，所以现在要格外小心陷阱！
  - 现在药水不再显示当前上限
  - 现在不再会在玩家手持物品时，来回在物品信息和关卡信息之间闪了
- 添加了玩家显血，**现在玩家血量能够实时显示到玩家名牌下方了，就像起床战争一样**！这在多人模式下可能会很有用
- 现在会提醒玩家调整文本背景不透明度
- 现在上一周目的玩家进入下一周目后不再会保留上一周目的数据（例如击杀数、死亡数等）
- 移除了版本限制，因此 Vibrant Visuals 在本地图中可用
- 现在在单人模式下，进入林乐家楼下会自动隐藏外部的 NPC 和展示文本
  - 然而，多人模式下仍然会正常显示外部的 NPC 和展示文本
- 现在二周目开启剧情模式是从 0-1 开启的了，而不是 1-0
- 更新了寒冰神殿的字体颜色，变得更蓝了
- 现在剧情模式下，结束后从试炼入口回到村庄会再次显示剧情模式独有的 NPC 了
- 加大了 6-4 岩浆粒子的密度

### 底层翻新

- **全面采用新版`/execute`语法**，彻底抛弃旧版语法，并更改了大量的记分板变量
- 经过群友的实测，我们甚至成功地在塞入了上文所述的一大堆功能的情况下得到了大幅度的性能提升！连我都觉得十分不可思议！
- **全面采用中国版脚本和国际版脚本配合函数系统**
- 在我们的群文档新增了一个文档，以供有需求的开发者查阅，对本地图源代码感兴趣的可以[见此](https://docs.nekoawa.com/docs/resources/completed/adventure_world_4/map_doc)
- 在附加包层面，合并了所有的行为包为一个行为包；合并了所有的资源包为一个资源包，正式进入「大一统时代」，并且全面采用新版的实体、方块、物品写法
- 对其他的模组的兼容性更好了
- 引入了 @jincarrot 的 ModSAPI，并进行了一定修改以适配中国版

### 漏洞修复

- 修复了在 6-4 中的变速齿轮（TPS 严重降低）问题
- 修复了玩家可能会在进入游戏时就直接被判定为死亡的问题
- 修复了 6-2 的门放错位置的问题
- 修复了其他玩家可能会被关在外面的问题  
  作者注：*经过实测，现在能够较好地处理意外被关在外面的问题，比如关门时被门挤出去。然而对于网络较差的玩家，在他们进门的一瞬间就立刻跑出还是有可能无法捕捉。我们已经尽了最大努力解决这个问题，目前已经是最优解了。此外，被挤出去的玩家在往门的方向走时也仍然可以被传送回来。*
- 修复了 1.21.80 后岩浆怪名字错误的问题
- 修复了在高版本下，Minecraft 的内容日志会警告`blocks.json`的`format_version`未指定的问题
- 修复了多人情况下，玩家可以在 2-1 通过不断推拉活塞卡出房间的问题
  - 然而，仅修复了此漏洞在 2-1 游戏时的情况，因为 2-1 结束后已不再会导致卡关（结束前可能会卡存活玩家数，但结束后至少能留一位玩家在场景内），并且可能会导致错判，造成性能浪费，综合以上因素考虑，只修复该漏洞最严重表现的部分
  - 我们还留了一个告示牌小彩蛋 (～￣▽￣)～
- 修复了多人情况下，在强行过剧情的玩家可能会在意外的地点死亡的问题
- 修复了两个速通成就在 45:00 ~ 45:59 仍然可以触发的问题
- 修复了评级判定中，分钟数的判据为`<=`的关系问题，现在为`<`的关系了
  - 例如，以前试炼时长这一指标需要分钟数为 60 分钟以内，以前的判定方法是分钟数≤60，现在改为了分钟数\<60，以防止 60:00 ~ 60:59 仍然可以触发
