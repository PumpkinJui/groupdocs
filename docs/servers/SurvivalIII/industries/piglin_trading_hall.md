---
sidebar_position: 7
description: 基于猪灵以物易物机制换取大量物资的工业机器。
---

# 猪灵交易所

## 概述

- 猪灵交易所，简称「猪交所」(与「村交所」即村民交易所相对应)，是位于下界交通矿山站下方的长条形下界砖块质结构，用于 *~~抽卡~~* 与猪灵快速进行以物易物，并将获得物品分类存储。
- 它是生存服目前的灵魂疾行附魔书最主要来源，也是下界第二大机器和第一大生电。
- 作为下界结构，它的主要交互区域使用了和下界交通标准一致的防刷怪设计。  
  *但是其他区域没有——希望进了那里的人不会被疣猪兽和猪灵淹没。*
- 它由 @PumpkinJui 建设和维护。
- 你知道吗：尽管名为「猪灵 *交易* 所」，但不同于村民的「交易」(Trading) 机制，猪灵的机制实际名为「以物易物」(Bartering)。*但是「猪灵以物易物所」这个名字实在太垃圾了，而且没法简称。*

## 使用方法

- 进入猪交所并走到尽头。
- 从左手边的木桶拿出金子。如果是金块，请拆成金锭。记得把活板门重新贴到木桶壁上面。
- 把金锭放入右手边的木桶。推荐放入不超过八组的金锭，因为更多的金锭会导致总时长超过五分钟的掉落物堆积，并最终可能导致掉落物消失。
- 打开活板门，然后把拉杆调至朝向左端。金锭应该会飞上去。
- 在金锭全部运输完毕后，把拉杆调至朝向右端。
- 等待拉杆上方的红石灯熄灭。等待过程中，可以由木桶旁边的脚手架前往观景走廊以观看物品运输过程。*也可以前往维修通道，但安全由你自己负责。另外不要乱动机器。*
- 红石灯熄灭即表示可以离开了。

## 实现原理

> 摘自 Wiki 相关词条。包括「猪灵」「以物易物」「物品」「通用物品分类器」等。

### 以物易物

![以物易物机制](/servers/SurvivalIII/industries/bartering.jpg)

- 玩家通过对成年猪灵丢出金锭或使用金锭可与其交换特定的物品。
- 投掷器投掷的金锭也可触发以物易物。
- 在基岩版中，如果在猪灵端详金锭时因检查到特定方块（例如箱子、下界金矿石）的变化（摧毁、被活塞推动等）而被激怒，其会立刻完成以物易物。

### 金锭运输

- 如果一个物品在一个不透明方块中的话，那么进一步判断如果它每一边都被其他不透明方块所环绕，它就会从该方块的顶端弹出，否则它会从没有被阻塞的侧面之一弹出。注意即便该方块的下方空间没有被占据，物品也遵循这个规律。

### 物品运输

- 使用「漏斗 - 漏斗矿车 - 漏斗 - 投掷器 - 冰道」的结构。其中漏斗每层各四个，漏斗矿车共四个，投掷器共一个。
- 冰道根据酿造台与半砖之间的挤压运输原理制作。感谢 @小鼠 提供冰道制作方案。

### 物品分类

- 物品分类器抄的 [Wiki](https://minecraft.fandom.com/zh/wiki/%E6%95%99%E7%A8%8B/%E9%80%9A%E7%94%A8%E7%89%A9%E5%93%81%E5%88%86%E7%B1%BB%E5%99%A8)。可能会在以后把一部分改为悦灵分类，也许。

## 维护

猪灵交易所最常见的维护项目包括：

- 补充金锭。
- 清理将近溢出或已溢出的已分类物品，最常见的有黑石、沙砾、箭、药水类。

其他不太常见的维护项目包括：

- 修复任何防刷怪设计漏洞。
- 修复任何被破坏的建筑结构和红石结构。
- 其他。

### 停用猪交所

在某些问题发生时，可禁止猪灵交易所的使用，如某（几）类物品溢出或即将溢出、红石电路异常等。但「金锭不足」不适用。

- 将投放金锭的木桶右上侧告示牌中的「状态」，由 `§a正常§f` 改为 `§4停用§f`。
- 围堵木桶和拉杆。必要时，可拆除后方的高频红石电路。

在这些问题解决后，猪灵交易所应按以上步骤逆向进行并恢复正常使用。

## 已知问题和 TODO

- [ ] **严重交易漏洞**：如果运输金锭的玻璃柱旁边有其他猪灵存在，则金锭可能被中途截胡并一无所获。
- [ ] **重要安全漏洞**：在观景走廊内部下线后再上线，重生地点将位于走廊外。
- [ ] **重要安全漏洞**：观景走廊外的区域 (即交互区的天花板上方) 有时会刷出疣猪兽。
- [ ] 维修更改：增加维修开关，在维修时打开该拉杆会锁定铁门，无法进出。
- [ ] 安全更改：在红石灯未熄灭时锁定铁门。
- [ ] 安全更改：全面防刷怪处理。
- [ ] 美观更改：将木桶命名。
- [ ] 载荷提升：让物品运输更快或空间更大，以支持多于八组的金锭。
- [ ] 载荷提升：增加存储用的箱子。
- [x] 美观更改：增加一个真正的猪灵头颅。*~~可能这辈子都实现不了~~感谢火卫。*
- [x] 美观更改：把放金锭的木桶嵌进墙里。
- [x] 实用性更改：在药水箱子旁边放置酿造台和红石粉。
